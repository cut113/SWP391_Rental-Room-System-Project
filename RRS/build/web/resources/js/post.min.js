function isNumberKey(n){var t=n.which?n.which:event.keyCode;return t>31&&(t<48||t>57)?!1:!0}function LoadVipType(){for(var t=vipTypeList.length,n=0;n<t;n++)$("#ddlVipType").append('<option value="'+vipTypeList[n].id+'">'+vipTypeList[n].name+"<\/option>")}function LoadPostCate(){for(var t=cateList.length,n=0;n<t;n++)ddlPostCate.append('<option value="'+cateList[n].id+'">'+cateList[n].name+"<\/option>")}function LoadCity(){for(var t=cityList.length,n=0;n<t;n++)ddlCity.append('<option value="'+cityList[n].code+'">'+cityList[n].name+"<\/option>")}function LoadDistrict(n){var u,r,t,i;if(ddlDistrict.html(""),ddlDistrict.append('<option value="">-- Quận/huyện --<\/option>'),n.length>0)for(u=cityList.length,r=0;r<u;r++)if(t=cityList[r],t.code==n)for(i=0;i<t.district.length;i++)ddlDistrict.append('<option value="'+t.district[i].id+'">'+t.district[i].name+"<\/option>");ddlDistrict.select2()}function LoadWard(n,t){for(var u,r,i=0;i<cityList.length;i++)if(cityList[i].code==n)for(u=0;u<cityList[i].district.length;u++)if(t==cityList[i].district[u].id){for(r=0;r<cityList[i].district[u].ward.length;r++)ddlWard.append('<option value="'+cityList[i].district[u].ward[r].id+'">'+(cityList[i].district[u].ward[r].pre.length>0?cityList[i].district[u].ward[r].pre+" ":"")+cityList[i].district[u].ward[r].name+"<\/option>");for(r=0;r<cityList[i].district[u].street.length;r++)ddlStreet.append('<option value="'+cityList[i].district[u].street[r].id+'">'+(cityList[i].district[u].street[r].pre.length>0?cityList[i].district[u].street[r].pre+" ":"")+cityList[i].district[u].street[r].name+"<\/option>")}}function LoadUnit(){for(var t=priceLevel.length,n=0;n<t;n++)ddlUnit.append('<option value="'+priceLevel[n].value+'">'+priceLevel[n].name+"<\/option>")}function VipChange(){var t=$("#ddlVipType").children("option:selected").val(),n="";switch(t){case"5":n='<strong>Tin thường<\/strong>: Là loại tin đăng bằng chữ <font color="#055699">màu xanh<\/font> và luôn nằm dưới các Tin Hot và Tin Vip';break;case"4":n="<strong>Vip ưu đãi<\/strong>: Là loại tin được hiển thị trong vòng 3 tháng, mỗi tuần sẽ được up tin tự động 1 lần. Tuần đầu tiên sẽ được hiển thị dưới hình thức VIP 2, các tuần tiếp theo hiển thị hình thức tin thường.";break;case"3":n='<strong>Tin Vip 3<\/strong>: Là loại tin đăng bằng chữ <font color="#38a343"><strong>IN HOA MÀU XANH<\/strong><\/font>, gắn nhãn <span class="label label-success" style="background-color: #38a343;">VIP<\/span> và luôn nằm dưới tin Vip 2 nhưng luôn luôn hiển thị trên tin thường.';break;case"2":n='<strong>Tin Vip 2<\/strong>: Là loại tin đăng bằng chữ <font color="#FF6600"><strong>Màu cam<\/strong><\/font>, gắn nhãn <span class="label label-warning" style="background-color: #FF6600;">VIP<\/span> nằm bên dưới Tin Vip 1 và ở trên các tin thường.';break;case"1":n='<strong>Tin Vip 1<\/strong>: Là loại tin được đăng tiêu đề bằng chữ <font color="#B32626"> <strong>Màu đỏ<\/strong><\/font>, gắn nhãn <span class="label label-danger" style="background-color: #e30217;">VIP<\/span> nằm bên dưới Tin Hot và ở trên các Tin Vip 2.';break;case"0":n='<strong>Tin Hot<\/strong>: Là loại tin được đăng tiêu đề bằng chữ <font color="#B32626"> <strong>Màu đỏ<\/strong><\/font>, gắn nhãn <span class="label label-danger" style="background-color: #e30217;">HOT<\/span> hiển thị ở top đầu trang tin và được hưởng nhiều ưu tiên nhất.'}$("#vip_cofig_info_explain").html(n);$("#vip_cofig_info_explain").show()}function showMessage(n,t){$(n).length>0&&($(n).html(t),$(n).show())}function hideMessage(n){$(n).length>0&&$(n).hide()}function setFocus(n){focused==!1&&(focused=!0,$(n).focus())}function GetAbsCost(){var i=new Date,n=new Date(VNDateTimeToUTCDateTime($("#txtStartDate").val(),"/")),t=new Date(VNDateTimeToUTCDateTime($("#txtEndDate").val(),"/")),e,f,r,u;n.setHours(i.getHours());n.setMinutes(i.getMinutes());n.setSeconds(i.getSeconds());t.setHours(i.getHours());t.setMinutes(i.getMinutes());t.setSeconds(i.getSeconds());n>t&&(e=t,t=n,n=e,$("#txtEndDate").val(UTCDateTimeToVNDateTime(t,"/")),$("#txtStartDate").val(UTCDateTimeToVNDateTime(n,"/")));f=GetTotalDay(n,t);$("#lblTotalDay").text(f);r=parseInt($("#ddlVipType").val());u=0;r==vip4?($("#lblUnitPrice").text((parseFloat(unitPriceListNew[r])*1e3).formatMoney(0)),u=unitPriceListNew[r]):($("#lblUnitPrice").text((parseFloat(unitPriceListNew[r])*1e3).formatMoney(0)),u=f*unitPriceListNew[r]);$("#lblCost").html(Math.round(u*1e3).formatMoney(0))}function resetLocation(){ddlWard.html("");ddlWard.append('<option value="">-- Phường/xã --<\/option>');ddlWard.select2();ddlStreet.html("");ddlStreet.append('<option value="">-- Đường/phố --<\/option>');ddlStreet.select2()}function LoadAutoAddress(){if(ddlCity.val()==""||ddlCity.val()=="0"||ddlDistrict.val()==""||ddlDistrict.val()=="0"){$("#txtAddress").val("");return}var n=[];n.push(ddlCity.children("option:selected").text());n.push(ddlDistrict.children("option:selected").text());ddlWard.val()!=""&&ddlWard.val()!="0"&&n.push(ddlWard.children("option:selected").text());ddlStreet.val()!=""&&ddlStreet.val()!="0"&&n.push(ddlStreet.children("option:selected").text());$("#txtAddress").val(n.reverse().join(", "))}var vip4=4,vip0=0,cityList=[],ddlPostCate=$("#ddlPostCate"),ddlCity=$("#ddlProvince"),ddlDistrict=$("#ddlDistrict"),ddlWard=$("#ddlWard"),ddlStreet=$("#ddlStreet"),ddlUnit=$("#ddlUnit"),focused=!1;$(document).ready(function(){typeof cityListOTher1!="undefined"&&(cityList=$.merge(cityList,cityListOTher1));typeof cityListOTher2!="undefined"&&(cityList=$.merge(cityList,cityListOTher2));typeof cityListOTher3!="undefined"&&(cityList=$.merge(cityList,cityListOTher3));typeof cityListOTher4!="undefined"&&(cityList=$.merge(cityList,cityListOTher4));LoadPostCate();ddlPostCate.change(function(){hideMessage($("#ddlPostCate-error"))});LoadCity();ddlCity.change(function(){hideMessage($("#ddlProvince-error"));resetLocation();LoadDistrict($(this).val());LoadAutoAddress()});ddlDistrict.change(function(){hideMessage($("#ddlDistrict-error"));var n=ddlCity.val(),t=$(this).val();resetLocation();LoadWard(n,t);LoadAutoAddress()});ddlWard.change(function(){LoadAutoAddress()});ddlStreet.change(function(){LoadAutoAddress()});LoadUnit();LoadVipType();$("#ddlVipType").change(function(){$("#hddVipType").val($("#ddlVipType").val());VipChange()});$("#txtMobile").keypress(function(n){return isNumberKey(n)});$("#Price").keyup(function(){var n=$(this).val();n!=0?$("#lblPrice").html(n+" "+$("#ddlUnit option:selected").text()):$("#lblPrice").html("")});$("#ddlUnit").change(function(){$(this).val()==="0"?($("#Price").val("0"),$("#Price").attr("readonly",!0),$("#lblPrice").text("Thỏa thuận")):($("#Price").val(""),$("#Price").removeAttr("readonly"),$("#lblPrice").text(""))});$("input[numbersonly=true]").each(function(){$(this).keydown(function(n){var t=$(this).attr("decimal")=="true",i=numbersonly(this,n,t);i==!1&&n.preventDefault()})});$("#frmPostCreate").submit(function(){var n=$("#btnPostCreate"),t;if($(this).valid()){if(t=parseFloat($("#Price").val()),t>0&&ddlUnit.val()==="0")return $("span[data-valmsg-for='Unit']").text(ddlUnit.attr("data-val-required")),ddlUnit.focus(),!1;if(t===0&&ddlUnit.val()!="0")return $("span[data-valmsg-for='Price']").text($("#Price").attr("data-val-required")),$("#Price").val("").focus(),!1;$.ajax({url:this.action,type:this.method,data:$(this).serialize(),beforeSend:function(){loading(n)},success:function(t){t.success?(n.text(n.text()),$(".alert, .alert-danger").remove(),showNotify(t.message,"success"),redirect(t.result)):(endLoading(n,n.text()),showError(t.message))},error:function(n){alert(n.statusText)}})}return!1});$("#frmPostEdit").submit(function(){var n=$("#btnPostEdit"),t;if($(this).valid()){if(t=parseFloat($("#Price").val()),t>0&&ddlUnit.val()==="0")return $("span[data-valmsg-for='Unit']").text(ddlUnit.attr("data-val-required")),ddlUnit.focus(),!1;if(t===0&&ddlUnit.val()!="0")return $("span[data-valmsg-for='Price']").text($("#Price").attr("data-val-required")),$("#Price").val("").focus(),!1;$.ajax({url:this.action,type:this.method,data:$(this).serialize(),beforeSend:function(){loading(n)},success:function(t){t.success?(n.text(n.text()),$(".alert, .alert-danger").remove(),showNotify(t.message,"success"),redirect(t.result)):(endLoading(n,n.text()),showError(t.message))},error:function(n){alert(n.statusText)}})}return!1});$("#ddlVipType").trigger("change")})